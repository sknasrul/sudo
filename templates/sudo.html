<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sudo AI</title>
  <style>
    body{
      display: flex;
      flex-direction: column;
      font-family: Arial, Helvetica, sans-serif;
      height: 97dvh;
      user-select: none;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    header{
      display: flex;
      align-items:center;
      justify-content: space-between;
    }
    #model{
      font-size: 1rem;
      font-weight: bold;
      padding: 1rem;
      border-radius: 1rem;
      color: gray;
      background-color: rgb(245, 245, 245);
      cursor: not-allowed;
    }
    svg{
      cursor: pointer;
    }
    svg:active {
      transform: scale(0.9);
    }
    #chats{
      display: flex;
      flex-direction: column;
      justify-content: center;
      flex: 1;
      user-select: text;
      overflow-y: auto;
    }
    #form{
      display: flex;
      justify-content: center;
      align-items: stretch;
      width: 100%;
      max-width: 700px;
      height: 4rem;
      overflow: hidden;
      border: 1px solid gray;
      border-radius: 1rem;
      margin: 0 auto;
    }
    input{
      flex: 1;
      font-size: 1.2rem;
      padding: 1rem;
      border: none;
      outline: none;
    }
    #send{
      border: none;
      outline: none;
      padding: 1rem;
      background-color: #b5c8fa;
      cursor: pointer;
      stroke: red;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 10% 50%);

    }
    label{
      display:block;
      align-self: flex-end;
      width:fit-content;
      margin: .5rem;
      background-color: whitesmoke;
      padding: 1rem;
      border-radius: 1rem;
    }
    span{
      margin: .5rem;
      padding: 1rem;
      background-color: #f6f8fd;
      max-width: 80%;
      align-self: flex-start;
      border-radius: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <label id="model" title="AI Model">Sudo AI <sup>(beta)</sup></label>
    <a href="login"><svg width="40" viewBox="0 0 24 24"><g fill="#200E32" transform="translate(3 2)"> <ellipse cx="9" cy="5.556" opacity=".4" rx="5.625" ry="5.556"></ellipse> <path d="M17.9902354,16.6757991 L17.9902354,16.6757991 C17.9953097,16.5967226 17.9953097,16.5174327 17.9902354,16.4383562 C17.9679741,16.1461262 17.885058,15.8607505 17.7461199,15.5981735 C17.1993012,14.5296804 15.6662559,14.0456621 14.3870907,13.7716895 C13.4744565,13.5817014 12.5471782,13.4595545 11.6139387,13.4063927 L10.6374767,13.3333333 L10.1980688,13.3333333 L9.6512501,13.3333333 L8.34279105,13.3333333 L7.79597234,13.3333333 L7.35656445,13.3333333 L6.38010248,13.4063927 C5.44686291,13.4595545 4.51958466,13.5817014 3.60695046,13.7716895 C2.32778527,14.0091324 0.794739971,14.5022831 0.247921264,15.5981735 C0.10898315,15.8607505 0.0260670984,16.1461262 0.00380576968,16.4383562 C-0.00126858989,16.5174327 -0.00126858989,16.5967226 0.00380576968,16.6757991 L0.00380576968,16.6757991 C-0.000879294659,16.7548861 -0.000879294659,16.834155 0.00380576968,16.913242 C0.0303656032,17.2029741 0.116574533,17.4851701 0.257685884,17.7442922 C0.804504591,18.8127854 2.33754989,19.2968037 3.61671508,19.5707763 C4.53104892,19.7518719 5.45762024,19.8739256 6.3898671,19.9360731 L7.36632907,20 L7.60067995,20 L7.80573696,20 L10.2078334,20 L10.4128904,20 L10.6472413,20 L11.6237033,19.9360731 C12.5559501,19.8739256 13.4825215,19.7518719 14.3968553,19.5707763 C15.6760205,19.3242009 17.2090658,18.8401826 17.7558845,17.7442922 C17.890425,17.4769528 17.9730826,17.1893744 18,16.8949772 C18.0012406,16.8218031 17.9979804,16.748623 17.9902354,16.6757991 Z"></path></g></svg></a>
  </header>
  <div id="chats">
    <h2><center>How can I help you today ?</center></h2>
    <p id="response"></p>
  </div>
  <div id="form">
    <input id="input" type="text" placeholder="Message here" required>
    <button title="Send message" onclick="input.value!='' ? send() : alert('Please enter your message.')" id="send"><svg width="30" viewBox="0 0 256 256"><g style="stroke: none; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"><path d="M 89.999 3.075 C 90 3.02 90 2.967 89.999 2.912 c -0.004 -0.134 -0.017 -0.266 -0.038 -0.398 c -0.007 -0.041 -0.009 -0.081 -0.018 -0.122 c -0.034 -0.165 -0.082 -0.327 -0.144 -0.484 c -0.018 -0.046 -0.041 -0.089 -0.061 -0.134 c -0.053 -0.119 -0.113 -0.234 -0.182 -0.346 C 89.528 1.382 89.5 1.336 89.469 1.29 c -0.102 -0.147 -0.212 -0.288 -0.341 -0.417 c -0.13 -0.13 -0.273 -0.241 -0.421 -0.344 c -0.042 -0.029 -0.085 -0.056 -0.129 -0.082 c -0.118 -0.073 -0.239 -0.136 -0.364 -0.191 c -0.039 -0.017 -0.076 -0.037 -0.116 -0.053 c -0.161 -0.063 -0.327 -0.113 -0.497 -0.147 c -0.031 -0.006 -0.063 -0.008 -0.094 -0.014 c -0.142 -0.024 -0.285 -0.038 -0.429 -0.041 C 87.03 0 86.983 0 86.936 0.001 c -0.141 0.003 -0.282 0.017 -0.423 0.041 c -0.035 0.006 -0.069 0.008 -0.104 0.015 c -0.154 0.031 -0.306 0.073 -0.456 0.129 L 1.946 31.709 c -1.124 0.422 -1.888 1.473 -1.943 2.673 c -0.054 1.199 0.612 2.316 1.693 2.838 l 34.455 16.628 l 16.627 34.455 C 53.281 89.344 54.334 90 55.481 90 c 0.046 0 0.091 -0.001 0.137 -0.003 c 1.199 -0.055 2.251 -0.819 2.673 -1.943 L 89.815 4.048 c 0.056 -0.149 0.097 -0.3 0.128 -0.453 c 0.008 -0.041 0.011 -0.081 0.017 -0.122 C 89.982 3.341 89.995 3.208 89.999 3.075 z M 75.086 10.672 L 37.785 47.973 L 10.619 34.864 L 75.086 10.672 z M 55.136 79.381 L 42.027 52.216 l 37.302 -37.302 L 55.136 79.381 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/></g></svg></button>
  </div>
  <script>
    document.addEventListener('keydown', function(e){
      const input = document.getElementById('input');
      input.focus();
      if (e.key === 'Enter'){
        if(input.value != ""){
          send();
        }}});
    input.onclick = function () {
      setTimeout(() => {
      input.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 500);
    };
    function send(){
      var label = document.createElement("label");
      label.textContent = input.value;
      document.getElementById("chats").appendChild(label);
      document.querySelectorAll('h2').forEach(h2 => h2.remove());
      document.getElementById("chats").style.justifyContent="start";
      document.getElementById("chats").scrollTop = chats.scrollHeight;
      
      fetch("bridge.php", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "message=" + encodeURIComponent(input.value)
      })
      .then(response => response.text())
      .then(data => {
        var span = document.createElement("span");
        span.textContent = data;
        document.getElementById("chats").appendChild(span);
        document.getElementById("chats").scrollTop = chats.scrollHeight;
      });
      input.value="";
    }
  </script>
</body>
</html>
